import{v as h,_ as b}from"./v4.psNbBq1n.js";import{_ as x}from"./index.BYSmW1qp.js";import{u as R}from"./index.Ch9xVUq6.js";import{f as S,A as u,ah as k,o as C,c as E,a as r,b as n,k as c,l as m,w as g,d as v}from"./entry.gr-FopAl.js";import{e as d}from"./appwrite.DjCiGi0b.js";import{u as L,a as U}from"./auth.store.fy8JI5-B.js";const B={class:"flex items-center justify-center min-h-screen w-full"},N={class:"rounded bg-sidebar w-1/4 p-5"},j=r("h1",{class:"text-2xl font-bold text-center mb-5"},"Login",-1),A={class:"flex items-center justify-center gap-5"},D=S({__name:"login",setup(I){R({title:"Login | CRM System"});const t=u(""),a=u(""),s=u(""),p=L(),y=U(),w=k(),f=async()=>{try{p.set(!0),await d.createEmailSession(t.value,a.value);const e=await d.get();e&&y.set({email:e.email,name:e.name,status:e.status}),t.value="",a.value="",s.value="",await w.push("/")}catch(e){console.error("Error during login:",e)}finally{p.set(!1)}},V=async()=>{try{await d.create(h(),t.value,a.value,s.value),await f()}catch(e){console.error("Error during registration:",e)}};return(e,o)=>{const i=b,_=x;return C(),E("div",B,[r("div",N,[j,r("form",null,[n(i,{placeholder:"Email",type:"email",class:"mb-3",modelValue:c(t),"onUpdate:modelValue":o[0]||(o[0]=l=>m(t)?t.value=l:null)},null,8,["modelValue"]),n(i,{placeholder:"Password",type:"password",class:"mb-3",modelValue:c(a),"onUpdate:modelValue":o[1]||(o[1]=l=>m(a)?a.value=l:null)},null,8,["modelValue"]),n(i,{placeholder:"Name",type:"name",class:"mb-3",modelValue:c(s),"onUpdate:modelValue":o[2]||(o[2]=l=>m(s)?s.value=l:null)},null,8,["modelValue"]),r("div",A,[n(_,{type:"button",onClick:f},{default:g(()=>[v("Login")]),_:1}),n(_,{type:"button",onClick:V},{default:g(()=>[v("Register")]),_:1})])])])])}}});export{D as default};
