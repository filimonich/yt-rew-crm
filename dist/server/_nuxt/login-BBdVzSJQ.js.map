{"version":3,"file":"login-BBdVzSJQ.js","sources":["../../../../pages/login.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { useAuthStore, useIsLoadingStore } from \"~/store/auth.store\";\r\n\r\nuseSeoMeta({\r\n  title: \"Login | CRM System\",\r\n});\r\n\r\nconst emailRef = ref(\"\");\r\nconst passwordRef = ref(\"\");\r\nconst nameRef = ref(\"\");\r\n\r\nconst isLoadingStore = useIsLoadingStore();\r\nconst authStore = useAuthStore();\r\nconst router = useRouter();\r\n\r\nconst login = async () => {\r\n  try {\r\n    isLoadingStore.set(true);\r\n    await account.createEmailSession(emailRef.value, passwordRef.value);\r\n    const response = await account.get();\r\n\r\n    if (response) {\r\n      authStore.set({\r\n        email: response.email,\r\n        name: response.name,\r\n        status: response.status,\r\n      });\r\n    }\r\n\r\n    emailRef.value = \"\";\r\n    passwordRef.value = \"\";\r\n    nameRef.value = \"\";\r\n\r\n    await router.push(\"/\");\r\n  } catch (error) {\r\n    console.error(\"Error during login:\", error);\r\n  } finally {\r\n    isLoadingStore.set(false);\r\n  }\r\n};\r\n\r\nconst register = async () => {\r\n  try {\r\n    await account.create(\r\n      uuid(),\r\n      emailRef.value,\r\n      passwordRef.value,\r\n      nameRef.value\r\n    );\r\n    await login();\r\n  } catch (error) {\r\n    console.error(\"Error during registration:\", error);\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex items-center justify-center min-h-screen w-full\">\r\n    <div class=\"rounded bg-sidebar w-1/4 p-5\">\r\n      <h1 class=\"text-2xl font-bold text-center mb-5\">Login</h1>\r\n\r\n      <form>\r\n        <UiInput\r\n          placeholder=\"Email\"\r\n          type=\"email\"\r\n          class=\"mb-3\"\r\n          v-model=\"emailRef\"\r\n        />\r\n        <UiInput\r\n          placeholder=\"Password\"\r\n          type=\"password\"\r\n          class=\"mb-3\"\r\n          v-model=\"passwordRef\"\r\n        />\r\n        <UiInput\r\n          placeholder=\"Name\"\r\n          type=\"name\"\r\n          class=\"mb-3\"\r\n          v-model=\"nameRef\"\r\n        />\r\n        <div class=\"flex items-center justify-center gap-5\">\r\n          <UiButton type=\"button\" @click=\"login\">Login</UiButton>\r\n          <UiButton type=\"button\" @click=\"register\">Register</UiButton>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"names":["uuid"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIW,eAAA;AAAA,MACT,OAAO;AAAA,IAAA,CACR;AAEK,UAAA,WAAW,IAAI,EAAE;AACjB,UAAA,cAAc,IAAI,EAAE;AACpB,UAAA,UAAU,IAAI,EAAE;AAEtB,UAAM,iBAAiB;AACvB,UAAM,YAAY;AAClB,UAAM,SAAS;AAEf,UAAM,QAAQ,YAAY;AACpB,UAAA;AACF,uBAAe,IAAI,IAAI;AACvB,cAAM,QAAQ,mBAAmB,SAAS,OAAO,YAAY,KAAK;AAC5D,cAAA,WAAW,MAAM,QAAQ;AAE/B,YAAI,UAAU;AACZ,oBAAU,IAAI;AAAA,YACZ,OAAO,SAAS;AAAA,YAChB,MAAM,SAAS;AAAA,YACf,QAAQ,SAAS;AAAA,UAAA,CAClB;AAAA,QACH;AAEA,iBAAS,QAAQ;AACjB,oBAAY,QAAQ;AACpB,gBAAQ,QAAQ;AAEV,cAAA,OAAO,KAAK,GAAG;AAAA,eACd,OAAO;AACN,gBAAA,MAAM,uBAAuB,KAAK;AAAA,MAAA,UAC1C;AACA,uBAAe,IAAI,KAAK;AAAA,MAC1B;AAAA,IAAA;AAGF,UAAM,WAAW,YAAY;AACvB,UAAA;AACF,cAAM,QAAQ;AAAA,UACZA,GAAK;AAAA,UACL,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,QAAQ;AAAA,QAAA;AAEV,cAAM,MAAM;AAAA,eACL,OAAO;AACN,gBAAA,MAAM,8BAA8B,KAAK;AAAA,MACnD;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}